asyncapi: 2.0.0
info:
  title: Todo API
  version: 1.0.0
  description: |
    Publishes the following messages:
    - `todo.created`
    - `todo.completed`
servers:
  nats:
    url: nats://nats:4222
    protocol: nats
channels:
  todo.created:
    subscribe:
      message:
        $ref: "#/components/messages/TodoCreated"
  todo.completed:
    subscribe:
      message:
        $ref: "#/components/messages/TodoCompleted"
components:
  messages:
    TodoCreated:
      payload:
        type: object
        required: [name]
        properties:
          name:
            type: string
            description: Name
            example: Demo
            minLength: 1
            maxLength: 100
          description:
            description: Description
            anyOf:
              - type: string
                example: Prepare the demo
                minLength: 1
                maxLength: 1000
              - type: "null"
    TodoCompleted:
      payload:
        type: object
        required: [id]
        properties:
          id:
            type: integer
            description: ID
            example: 1
            minimum: 1
