asyncapi: 2.0.0
info:
  title: Notification Service
  version: 1.0.0
  description: |
    - Subscribes to the following notification messages:
      - `todo.created.ok`
      - `todo.created.error`
      - `todo.completed.ok`
      - `todo.completed.error`

    - Delivers notifications to Todo App.
servers:
  nats:
    url: nats://nats:4222
    protocol: nats
channels:
  todo.created.ok:
    publish:
      message:
        $ref: "#/components/messages/TodoCreatedOk"
  todo.created.error:
    publish:
      message:
        $ref: "#/components/messages/TodoError"
  todo.completed.ok:
    publish:
      message:
        $ref: "#/components/messages/TodoCompletedOk"
  todo.completed.error:
    publish:
      message:
        $ref: "#/components/messages/TodoError"
components:
  messages:
    TodoCreatedOk:
      payload:
        type: object
        properties:
          id:
            type: integer
            description: Todo ID
            example: 1
          name:
            type: string
            description: Todo name
            example: Demo
          description:
            type: string
            description: Todo description
            example: Prepare the demo
          created_at:
            type: string
            description: Creation timestamp
            example: "2021-05-01T17:30:00Z"
          updated_at:
            type: string
            description: Update timestamp
            example: "2021-05-01T18:00:00Z"
    TodoCompletedOk:
      payload:
        type: object
        properties:
          id:
            type: integer
            description: Todo ID
            example: 1
    TodoError:
      payload:
        type: object
        properties:
          code:
            type: string
            description: Error code
          message:
            type: string
            description: Error message
